{% extends "base.html" %}
{% load extras %}
{%block content%}

<ul class="breadcrumb">
  <li><a href="/Workflow/">Workflows</a> <span class="divider">/</span></li>
  <li><a href="{{node.batch.workflow.url }}">{{node.batch.workflow}}</a> <span class="divider">/</span></li>
  <li><a href="{{node.batch.url }}">{{node.batch}}</a><span class="divider">/</span></li>
  <li class="active">{{node}}</li>
</ul>

<div class="alert {%if node.successful%}alert-success{%endif%}">
    <h1>
        {%if node.successful%}<i class="icon-thumbs-up" rel="tooltip" title="Successful"></i>{%endif%}
        {%if node.status == "failed"%}<i class="icon-thumbs-down" rel="tooltip" title="Failed"></i>{%endif%}
        {{node}}
    </h1>
<strong>Tags</strong>: 
{% for k,v in node.tags.items %}
<span class="label label-important">{{k}}:{{v}}</span>
{% endfor %}
</div>
<dl class="dl-horizontal">
<dt>Status</dt><dd>{{node.status}}</dd>
<dt>Memory Requirement</dt><dd>{{node.memory_requirement}}</dd>
<dt>File_size</dt><dd>{%if settings.show_node_file_sizes%}{{node.file_size}}{%else%}off{%endif%}</dd>
<dt>Wall time</dt><dd>{{node.wall_time|format_time}}</dd>
<dt>Successful</dt><dd>{{node.successful}}</dd>
<dt>Created On</dt><dd>{{node.created_on}}</dd>
<dt>Finished On</dt><dd>{{node.finished_on}}</dd>
<dt>Pre Command</dt><dd><pre class="pre-scrollable">{{node.pre_command}}</pre></dd>
<dt>Output Directory</dt><dd><code>{{node.output_dir}}</code></dd>
<dt>Outputs<strong></strong></dt>
{% for key,val in node.output_paths.items %}
<dd><em>{{key}}</em>:
<code>
{%if node.sucessful%}
    <a href="{% url jobAttempt_output node.get_successful_jobAttempt.id key%}">{{val}}</a>
{%else %}
    {{val}}
{% endif %}
</code>
</dd>
{% empty %}
<dd>None</dd>
{%endfor%}


</dl>

<h3>JobAttempts</h3>
{% for j in jobAttempts_list %}
<ul>
    <li style="list-style-type:none">
        {%if j.successful%}<i class="icon-thumbs-up" rel="tooltip" title="Successful"></i>{%else%}
        {%if j.queue_status == "completed"%}<i class="icon-thumbs-down" rel="tooltip" title="Successful"></i>{%endif%}{%endif%}
        {%if j.queue_status == 'queued'%}<i class="icon-time" rel="tooltip" title="Job is Queued"></i>{%endif%}
        {%if j.get_drmaa_status == 'job is running'%}<i class="icon-refresh" rel="tooltip" title="Job is running"></i>{%endif%}
        {%if j.get_drmaa_status == 'not sure'%}<i class="icon-question-sign" rel="tooltip" title="Not sure"></i>{%endif%}
        
        <a href="{{j.url}}">{{ j }}</a>
    </li>
</ul>
{% empty %}
  No job attempts in this node.
{% endfor %}

{% endblock %}